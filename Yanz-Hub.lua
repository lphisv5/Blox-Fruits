local HttpService = game:GetService("HttpService")
local savePath = "YanzHub/keydata.json"

local webhookExpired = "https://discord.com/api/webhooks/1422733445070590005/WlxjdLcVDnkmqSDQqOMHTZHxEXoJj9xj49p629i1DHC4qcB6XZRB6zVlSvXItvLk2G-R"
local webhookUsed = "https://discord.com/api/webhooks/1422733264384163962/U2p2h1NLwsUtNEjlRdrDawrVJ4fiziL8sp7XB5bf2qSQ2ZjtGJj6JpHdxUNfMjWkmIIh"

local validKeys = {
"YANZ-KEY-LL9R6E6T42G9CQD22NA5OFACIYKQPHW6RJSO543JQT348H5Y4Q",
"YANZ-KEY-OFNCTLOFSR2YJKY1NJDUVKUGPC5XO1W3XXOK6KB5UZK133Q90U",
"YANZ-KEY-58I5P6RZSPM1K3D7Y96S5IMYH3SFDPGMCGAJZAT151JKN2G6GB",
"YANZ-KEY-CKX0WOY7A6SQLDQWQKOLLDNHDRX16ENULOL7Z2LXXDPUN16U10",
"YANZ-KEY-O57MQINC2819PSWC1ODLEO6Z17R9PJRHCWEDG5NG3KCV7DXAYX",
"YANZ-KEY-MOIUWIWBOET2V1YRFEIBU7GO6MHL66LELPIA4LC1NF8QHX5N9G",
"YANZ-KEY-FD3OGPUVPRM5946455H2VTPBGSDFT3WHP3XQOHJDNQJTJW93DZ",
"YANZ-KEY-XFRN9X937ZQDNYYVLFJOAVBLF9FAXTIM7DYJB0HGQ8UCHJ1JFV",
"YANZ-KEY-6UDZSA0Q21MNFLHVFDGXPXKJCQO35UQPD6I5F6S26GN4GAQ73S",
"YANZ-KEY-BRQH8DRT6BU5PBC4QIPAS8J3N3IA81OG7R334TDFUGCIG4GUTE",
"YANZ-KEY-P20VOQ3V7AUDXZ2F7VVBXJ5RFUNGWQTJO6UOCXPE9G5MM9W4Q8",
"YANZ-KEY-PPUVRV7SQNUHYR0YQU0H7YCQ9DMUGWOTPGWNK9G9A97N3L7FCS",
"YANZ-KEY-ZP86UXC8VWGWL0PC26JQ83K6D64MOLIDSMGS2YE7MEWA2LL2XN",
"YANZ-KEY-4WEIBA4E3O37PRKH7H3HPA2PFTVDM1Q1ORAVCFZ54VCAWKE1R2",
"YANZ-KEY-EN4RZ72L4RXX7R57VJ6UFBZNES6RCMIAFQJKBT6IR52T8VVLRX",
"YANZ-KEY-E117TXFI76J71QPY32RZUDTEKTH035180Z7DQ3YP6P6VRSOZ12",
"YANZ-KEY-8SP1549L13X41LCVAYXG2RVI01QIX2DRJJ8IRL9HCG275BPCTS",
"YANZ-KEY-GJA1TV2C0WQ0LEY8JQ1JGZOGW7XBD43IPF37YBDQOHWJGTOUPB",
"YANZ-KEY-AZQ18ERIH5STCRLUF4C5XCLP55WAEJU3HRWWDW0OSGLC8299YD",
"YANZ-KEY-MVBLSTO5HKARXU1YDO8BBT91EWOJNKF29RCPGWX4SY9OF584OJ",
"YANZ-KEY-VJQCN73C5527YRRPULR3TL1QG8CUACV9R0SW33H55W8S03HMPT",
"YANZ-KEY-TFZOIWGCOPZL4FD7JWT2XAGUW3ZIKW6AGYNIQX49MRESCJE07K",
"YANZ-KEY-A1K7EPX6TTI86SUVTAUTMHD38350VB1C4T6WRWLTRWLYXZWQSO",
"YANZ-KEY-TKPC8OYL70CVGKY02T3683CAUJ36FHNZIGHID4TTOGT5ZGYY4O",
"YANZ-KEY-5OFM2UOXC2TXPEKMQAFJ3ROXCA09FVTNXDIEYNCCP8319ZTLC8",
"YANZ-KEY-Y7KE1EY78FBWSTS9ZB1JNBNGL3QVO9OWMD1GUHH61OAL6F3RWM",
"YANZ-KEY-5FJ4PZGJYCY2MQ118DDT27QONPDY08CQ3U2JVNE89ARXUNRIQB",
"YANZ-KEY-IYSCZUQTRZH7CWBVWIJQTWDGPEHGZKRVL3G3BNOZ9CTPN3VU7Y",
"YANZ-KEY-0P652IUMNQJ4VHVTE0JIJU0GOVWK1V7JXA3ZRSBFDRXHK4THO9",
"YANZ-KEY-OBLSN3ZU597L9CQXKYPWBNLOFWPAFYDKS52RJQB2B1XIIGCEHY",
"YANZ-KEY-XEYPVUW0SOOGJYULF6EXSZ0YV7FZMZXX7UGL04XBBAXSYUQ7EU",
"YANZ-KEY-D2W6WW3FFNYDM3OTYZNA8M3BB9F17O85GF1IQ6CCUS6V31UE21",
"YANZ-KEY-FOK5QIZKEBMKJQGYTF4YIZYKPSRIN29EJPWM2J3I8K70ITNSNK",
"YANZ-KEY-NHTVP4XNTTK8N2O79T8FI4LNKRLBHVFZZYLJ43Q6KC8FEBWV6I",
"YANZ-KEY-3EMK57L4DJBIJDW15RCKUWKCZX65VSXJOWR8EJZ6BBIHUEPFHE",
"YANZ-KEY-M4O889IPHAJ0Q6GN9ZNKSQL1VR6BH1506NWCJ0QBWPDHTP9MU2",
"YANZ-KEY-LDGLER912M4BYRDD999OWLNDOPEX21CQ7D9J67HVENHDZPJ5YY",
"YANZ-KEY-E63R620WC4JN4QU16YMKJAKH78YAHE9TN5BMGCVKR5UPFVX0ZI",
"YANZ-KEY-KO363I1KMN2V9NVTXQ0R4Q80H6JHF1K4H2U2KVO6PKACQY4G0N",
"YANZ-KEY-P4WDT9YEFQVZBWJOT6RICQ622WQXVT0R2KZ9DEYW9MF2DCPMKA",
"YANZ-KEY-74HB0CGJYYS3QL7XF7PTZHLW86NNSJGP17MYE9NR1LKPDVNOA2",
"YANZ-KEY-S6UEGMC0RGPQS3332KXVQBQQNPRIOCGQFPCAE220NMT5PCZAF0",
"YANZ-KEY-T72K6ZQWL8Z1XL7LC349TAF7KDG5DI1UUV4E0RGCMOSAMN3W5Z",
"YANZ-KEY-8P76GFI48IZUWIVXISL0S9AGF84MUE7MCZMLGTNIE7DTUNV5W4",
"YANZ-KEY-7QYV713Z8HWIOWBXDYL6DN17RPKQWYWOB37US1CCQTS34SQY0H",
"YANZ-KEY-KD8JOZ4W2UIFTXL7FT9IZNY91GJQLMWAEUAY7YPKCRUQMQEYX1",
"YANZ-KEY-7KRPZ3051ONYQYNAVPYBSGPUVSWIKKSB6HK75WWC7YAELJHKYJ",
"YANZ-KEY-N9P711A7JXCASIH8Q6WM68UZRH7JGNM1BQNV041SFPIWG78FNT",
"YANZ-KEY-RIHKAFTVAU36SULZOG4I26XPY8FPJL8GDERH8ZFMPL6949LBH8",
"YANZ-KEY-VGOJO5G0FK4NYC776W654K5JGD9Z0WFTH3B3011ALTDCU9E6L9",
"YANZ-KEY-HN7NNKMOW8LV17023LX7A2BKDML5QDRE9WHX3Y95IRH20GTU5F",
"YANZ-KEY-N7X0HT3WQIPTHHZP0HPR8FXUR9B8SXUNX99YMYTSPI7D6KVELH",
"YANZ-KEY-7BRJSFCF9DNBOP8E2FMQ58JYFN10K6CVN5CL5G6GW66BHB6HD4",
"YANZ-KEY-GWLEHURJKXXKEWKJSXRQJFVY81W2DVCF9EBGTO7YUBCBZXFMRE",
"YANZ-KEY-S7SOK05J0XBCDWH7TSA5POD6YBJP2J1ML4N4PJBHGL0YF0VABC",
"YANZ-KEY-WDWP7P9C78R2QHTH69MUB024EC51IDZP9BEDTECRGWMPHYK6P3",
"YANZ-KEY-U82EF81Q35GN4L8CVSXG9KTH2MV8B8FSNCFO6UIY696KZ9B9GL",
"YANZ-KEY-WHZE8FFHIC7CFBV80DDSZQKS7Z63Z49U5H7TBGM3KZ5U3VKPUU",
"YANZ-KEY-MV7V12ZBWZQEY81TKW4QOJK0DALNK02FQXMV3BCRH4HLNCP083",
"YANZ-KEY-SPGFJFXNX1OTM9EIVQO3MPTJXFVLZ32XNKQG7PRP6ZGM034QJ2",
"YANZ-KEY-GQJZL7B07ZLPV2EOGADVOZ5VT5YKDI9YJB8CXYWDMQR5M7TND5",
"YANZ-KEY-V72IDGDE3AHTBDAUSXZYSTA9E62Y65IVFUEMDUI65PKWB82MHY",
"YANZ-KEY-7Q62SHOTT6ZMX4MWU47ZF5J1Y74F3AT5ZJVMJ07GM6B27JOL82",
"YANZ-KEY-6YU1NAVK1KWBIK4ZUW506A2S8YJAJ6PGAQ2OURU8NRF3UG4GXD",
"YANZ-KEY-Q8F9MYK795C6G6O894A5XN7AWHITM0O8GWHI8RP4QOPQI2OAU4",
"YANZ-KEY-JRWCH4XQ2EJJY7G829V643JIC5TNZ6BY657W6NYEO1Q4UL0YYS",
"YANZ-KEY-2TCAUGP1E6S28O3Y0I74U0N1555DFR1JGDXYTOSZDMC7AJ6K3D",
"YANZ-KEY-HUP2SM9PNYKOKGZ98X47CQWML1KFRCXKB7XKSF6SEXLGJDAIY2",
"YANZ-KEY-N0D9FWERUNAK3C6ABS6OAVL4C09DUBZOZSVH6JQWP7PYDO3COS",
"YANZ-KEY-H744PK2SUMJ824RYOFVQ2491LL8E7CK5IM9DAZM4NWMRR92IGB",
"YANZ-KEY-S2L4RNHURI8ZAI16RG8ZEHNDQ4T1QEQ86GAT94QGX268XDY71F",
"YANZ-KEY-WPL167XDQMEIVT3K6O1IDULFWY2WBXJP14SZY8QBN4R04X498U",
"YANZ-KEY-E8PA4N76AU1HNCDWD6Z1ZT15UUIGBI2RRSD8S0T06RTA27MW5N",
"YANZ-KEY-DM6GC1KEVS2YAC8B8SDCAFFINLWMOCKIMRBE0BOZZ6VCPMBWL3",
"YANZ-KEY-5J9JPXUZ4IZYT3PMAQHDIHZ867J69JID3PQCY17Z9U7OJKHCBB",
"YANZ-KEY-5J8B7VGCQTZ85GD156ISDJ25FIM3XBCHJTW75R7L6A7P7A91FH",
"YANZ-KEY-DIBA2DKSZXD142P5DEVLI8WMCXR9CQSBLFI3Z94UJYWJDLW36D",
"YANZ-KEY-JMASEDXAV3TDFSL9NHNHSHTNLOOV8TZB159A2R8QBW3S55D6OB",
"YANZ-KEY-JD18GBGX9H4FPZN7850N5H1XV7A0DGG1847LETLM3JDBTAOSK8",
"YANZ-KEY-Q1FBKD66S3KL712HJ6701MPJTGSEPCJ0C14XAV2M9XRD1J13VG",
"YANZ-KEY-ES9G72HG3UVJMPS89DC8F9J557H51SNWM7P7FIYTGOCQRSOXB4",
"YANZ-KEY-EJ05IHG6OC51ZX1RMCZ156HUCT4AICAX2PHT3PDW3W8QE4H1D3",
"YANZ-KEY-4N6665Z25KBCS4AR652HLIKIT39XXMEFY0J10ORGUV5A1SA3YJ",
"YANZ-KEY-OBKNUVQ604BY59WPEBA3N1EJG6ZOA8LIN2KXIEV6R5LDE3XY1S",
"YANZ-KEY-ZZSYJ7E8HRVDEB89QYZGCUUNANJJBN8CVJ1T6LX51JFJ024HYG",
"YANZ-KEY-CRVE5K1IWQVMCK3HSQXBXV56N8H3BXAB6QWKF1RH0W6A1GJOKC",
"YANZ-KEY-7IBUARZ7G78K61XI78YF9ZRFJFHW33LNFU7K1RV12GCD2DLXER",
"YANZ-KEY-3FFESLU3TKICCPCR0VBA58PW16FYJSJG1W9B8NPPE60GOZ240F",
"YANZ-KEY-PC7WBC33VXDFDIA4YG2C9WE65RIBY04QMJ73AIW7QITRS3RGDS",
"YANZ-KEY-BUAQ7U5D5CFOFX5FILNK4JJ88IIPA4M2KIAMZIYB2GXHJNR0DF",
"YANZ-KEY-NQWP4N8CAK8L3ZTOIB1BQZ8UGMQUKW8C6V63UWTL9NZ98L0F7U",
"YANZ-KEY-K3DS5YK8GFTC5IU4S9OVXBN2G0K7VJBU5S6IZXVGTBLQZKJ1K7",
"YANZ-KEY-VS49UHBQNNHE4VUNLX8LNSQZRCAWXYLVJSVOJ1WN0JKXTSUQNC",
"YANZ-KEY-CD8DV1JC2M5WGYCEV0FLD097GOMH0X1I1XHPI2IPGJA7L2GIQY",
"YANZ-KEY-JMDOH7QUQOP26U5CUHYHZ421VFN7EG5R6NVOFMMCWCPQV2S1LI",
"YANZ-KEY-6YFB8TNHEMFP3JLN1Q8EPL4D6DYTUWGZNJDHBAWWGEAVOUPYWU",
"YANZ-KEY-MK3YTI1333FIPCQKZTXNFZ6VGO6AQI6JHEOHU8RG2M2J3KMDT7",
"YANZ-KEY-PJZXLHEMD8L5QOMA8PJY6VGUL092Z6PDQ1K6J5HC3VU9U8GLKM",
"YANZ-KEY-FDH1D6NQLFUHIIYI1EDKL6SQLOTYX5TPEL9S6E2N6D4QAJ1GBZ",
"YANZ-KEY-CSCWIZ8Z11UV0F76VU8UXJDC06VO5A2LHCQFJAORDOMXAG97BN",
   }

local function sendWebhook(url, key, message)
    local data = {
        embeds = {{
            title = message,
            description = "Key: `" .. key .. "`",
            color = 16711680
        }}
    }
    pcall(function()
        HttpService:PostAsync(url, HttpService:JSONEncode(data), Enum.HttpContentType.ApplicationJson)
    end)
end

local function saveKey(key)
   local data = {
      key = key,
      timestamp = os.time()
   }
   local json = HttpService:JSONEncode(data)
   writefile(savePath, json)
end

local function checkSavedKey()
   if isfile(savePath) then
      local json = readfile(savePath)
      local success, data = pcall(function()
         return HttpService:JSONDecode(json)
      end)
      if success and data.key then
         local expired = (os.time() - data.timestamp) >= 86400
         local valid = table.find(validKeys, data.key)
         if expired then
             sendWebhook(webhookExpired, data.key, "Key Expired")
             return false
         end
         if valid then
             sendWebhook(webhookUsed, data.key, "Key Used")
             return true, data.key
         end
      end
   end
   return false
end

local function loadGameScript()
   local GameScripts = {
      [12331842898] = "https://github.com/lphisv5/rbxScript/raw/refs/heads/main/+1BlocksEverySecond.lua",
      [121864768012064] = "https://github.com/lphisv5/rbxScript/raw/refs/heads/main/Fickit.lua",
      [9285238704] = "https://github.com/lphisv5/rbxScript/raw/refs/heads/main/Race-Clicker.lua",
      [127742093697776] = "https://github.com/lphisv5/rbxScript/raw/refs/heads/main/PlantsVsBrainrots.lua",
      [537413528] = "https://github.com/lphisv5/rbxScript/raw/refs/heads/main/BuildABoat.lua"
   }
   local url = GameScripts[game.PlaceId]
   if not url then
      error("Game not supported")
   end
   loadstring(game:HttpGet(url))()
   return true
end

local valid, savedKey = checkSavedKey()
if valid then
   local success, err = pcall(loadGameScript)
   if not success then
      warn("Load Error: " .. tostring(err))
   end
   return
end

local Rayfield = loadstring(game:HttpGet('https://sirius.menu/rayfield'))()
local Window = Rayfield:CreateWindow({
   Name = "Yanz Hub Key System",
   LoadingTitle = "Loading Yanz Hub",
   LoadingSubtitle = "by Yanz",
   ConfigurationSaving = { Enabled = true, FolderName = "YanzHub", FileName = "KeyConfig" },
   Discord = { Enabled = false },
   KeySystem = false
})

local Tab = Window:CreateTab("Key", 4483362458)
local enteredKey = ""

local Input = Tab:CreateInput({
   Name = "Enter Key",
   PlaceholderText = "KEY",
   RemoveTextAfterFocusLost = false,
   Callback = function(Text) enteredKey = Text end,
})

local CheckButton = Tab:CreateButton({
   Name = "Check Key",
   Callback = function()
      if enteredKey == "" then
         Rayfield:Notify({Title = "Error", Content = "Please enter a key first.", Duration = 3, Image = 4483362458})
         return
      end

      if table.find(validKeys, enteredKey) then
         sendWebhook(webhookUsed, enteredKey, "Key Used")
         local success, err = pcall(loadGameScript)
         if success then
            saveKey(enteredKey)
            Rayfield:Destroy()
         else
            Rayfield:Notify({Title = "Load Error", Content = "Failed to load the script: " .. tostring(err), Duration = 5, Image = 4483362458})
         end
      else
         Rayfield:Notify({Title = "Invalid Key", Content = "The entered key is invalid.", Duration = 3, Image = 4483362458})
         sendWebhook(webhookExpired, enteredKey, "Invalid/Expired Key")
      end
   end,
})

local GetButton = Tab:CreateButton({
   Name = "Get Key",
   Callback = function()
      setclipboard("https://lphisv5.github.io/v4/checking.html")
      Rayfield:Notify({Title = "Copied to Clipboard", Content = "Key page URL has been copied to your clipboard!", Duration = 3, Image = 4483362458})
   end,
})
